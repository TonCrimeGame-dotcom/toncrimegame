<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TonCrime</title>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
body{
    margin:0;
    background:#0e0e0e;
    font-family:Arial;
    color:white;
}

/* HEADER */
.header{
    position:fixed;
    top:0;
    left:0;
    right:0;
    height:60px;
    background:#111;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 15px;
    z-index:1000;
    border-bottom:1px solid #222;
}

.logo{
    font-size:22px;
    font-weight:bold;
    color:#ffb300;
    cursor:pointer;
}

.stats{
    font-size:14px;
}

/* USER PANEL */
.userPanel{
    margin-top:70px;
    background:#1a1a1a;
    padding:15px;
    border-radius:8px;
    margin-left:15px;
    margin-right:15px;
}

/* MENU */
.menu{
    position:fixed;
    top:0;
    left:-250px;
    width:250px;
    height:100%;
    background:#181818;
    transition:0.3s;
    padding-top:60px;
    z-index:2000;
}

.menu a{
    display:block;
    padding:15px;
    color:white;
    text-decoration:none;
    border-bottom:1px solid #222;
}

.menu a:hover{
    background:#222;
}

.menuBtn{
    cursor:pointer;
    font-size:22px;
    margin-right:10px;
}

.overlay{
    position:fixed;
    top:0;
    left:0;
    right:0;
    bottom:0;
    background:rgba(0,0,0,0.6);
    display:none;
    z-index:1500;
}

.content{
    padding:15px;
    margin-top:10px;
}
</style>
</head>
<body>

<div class="header">
    <div>
        <span class="menuBtn" onclick="openMenu()">â˜°</span>
        <span class="logo">TonCrime</span>
    </div>
    <div class="stats" id="topStats">
        YÃ¼kleniyor...
    </div>
</div>

<div class="menu" id="sideMenu">
    <a href="index.html">ğŸ  Ana Sayfa</a>
    <a href="missions.html">ğŸ“‹ GÃ¶revler</a>
    <a href="pvp.html">âš” PvP</a>
    <a href="weapons.html">ğŸ”« Silah KaÃ§akÃ§Ä±sÄ±</a>
    <a href="nightclub.html">ğŸŒ™ Gece KulÃ¼bÃ¼</a>
    <a href="smoke.html">ğŸ’¨ Smoke & Smart</a>
    <a href="brothel.html">â¤ï¸ Genel Ev</a>
    <a href="hospital.html">ğŸ¥ Hastane</a>
    <a href="business.html">ğŸ’¼ Ä°ÅŸ HayatÄ±</a>
    <a href="tournament.html">ğŸ† Turnuva</a>
</div>

<div class="overlay" id="overlay" onclick="closeMenu()"></div>

<div class="userPanel" id="userPanel">
    YÃ¼kleniyor...
</div>

<div class="content">
    <!-- SAYFA Ä°Ã‡ERÄ°ÄÄ° BURAYA GELECEK -->
</div>

<script>
const supabaseClient = supabase.createClient(
"https://hwhscuyudwphnsipibpy.supabase.co",
"sb_publishable_dItLcV8z83CvDWuR8nTabA_ImTHGETu"
);

let userId = 1; // Åimdilik sabit test id

function openMenu(){
    document.getElementById("sideMenu").style.left="0";
    document.getElementById("overlay").style.display="block";
}

function closeMenu(){
    document.getElementById("sideMenu").style.left="-250px";
    document.getElementById("overlay").style.display="none";
}

async function loadPlayer(){
    let {data} = await supabaseClient
    .from("users")
    .select("*")
    .eq("id",userId)
    .single();

    if(!data){
        document.getElementById("topStats").innerHTML="KullanÄ±cÄ± yok";
        return;
    }

    document.getElementById("topStats").innerHTML =
    `Lv ${data.level} | XP ${data.xp}/${Math.floor(100*Math.pow(1.05,data.level-1))} | âš¡ ${data.energy}/100 | ğŸ’° ${data.yton}`;

    document.getElementById("userPanel").innerHTML =
    `ID: ${data.id}<br>
     Takma Ad: ${data.nickname}<br>
     Level: ${data.level}<br>
     XP: ${data.xp}`;
}

async function energyRegen(){
    let {data} = await supabaseClient
    .from("users")
    .select("*")
    .eq("id",userId)
    .single();

    if(data.energy < 100){
        await supabaseClient
        .from("users")
        .update({energy:data.energy+1})
        .eq("id",userId);
    }
    loadPlayer();
}

setInterval(energyRegen,300000); // 5 dakika
loadPlayer();
</script>

</body>
</html>
