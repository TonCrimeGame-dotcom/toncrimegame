<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>TonCrime</title>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>

/* ================= GLOBAL ================= */

body{
margin:0;
background:#0e0e0e;
color:white;
font-family:Arial;
overflow-x:hidden;
}

/* ================= TOPBAR ================= */

.topbar{
position:fixed;
top:0;
left:0;
width:100%;
background:#111;
padding:16px 25px;
display:flex;
justify-content:space-between;
align-items:center;
border-bottom:1px solid #222;
z-index:2000;
}

.logo{
font-size:22px;
color:gold;
font-weight:bold;
}

.menu-btn{
cursor:pointer;
font-size:22px;
margin-right:15px;
}

/* ================= SIDEBAR ================= */

.sidebar{
position:fixed;
top:0;
left:-260px;
width:260px;
height:100%;
background:#151515;
padding:25px;
transition:.3s;
z-index:2500;
}

.sidebar.open{
left:0;
}

.sidebar p{
cursor:pointer;
padding:10px 0;
border-bottom:1px solid #222;
}

.overlay{
position:fixed;
width:100%;
height:100%;
background:rgba(0,0,0,.6);
display:none;
z-index:2400;
}

.overlay.show{
display:block;
}

/* ================= CONTENT ================= */

.main{
margin-top:80px;
padding:25px;
max-width:900px;
margin-left:auto;
margin-right:auto;
}

/* ================= USER STATS ================= */

.stats{
font-size:14px;
text-align:right;
}

.bar{
width:260px;
height:8px;
background:#333;
border-radius:6px;
overflow:hidden;
margin-top:4px;
}

.bar-fill{
height:100%;
}

.xp-fill{background:limegreen;}
.energy-fill{background:gold;}

/* ================= CARDS ================= */

.card{
background:#1b1b1b;
padding:18px;
margin:15px 0;
border-radius:10px;
}

/* ================= BUTTON ================= */

button{
width:100%;
padding:12px;
background:gold;
border:none;
border-radius:6px;
font-weight:bold;
cursor:pointer;
margin-top:10px;
}

button:hover{opacity:.9}

/* ================= MISSION PROGRESS ================= */

.mission-progress{
width:100%;
height:8px;
background:#333;
border-radius:6px;
margin:10px 0;
overflow:hidden;
}

.progress-fill{
height:100%;
width:0%;
background:gold;
transition:width 0.05s linear;
}

</style>
</head>

<body>

<!-- ================= SIDEBAR ================= -->

<div class="sidebar" id="sidebar">
<h3 style="color:gold">Men√º</h3>

<p onclick="PAGE.go('index')">üè† Ana Sayfa</p>
<p onclick="PAGE.go('missions')">üéØ G√∂revler</p>
<p onclick="PAGE.go('pvp')">‚öî PvP</p>

</div>

<div class="overlay" id="overlay"></div>

<!-- ================= TOPBAR ================= -->

<div class="topbar">

<div>
<span class="menu-btn" onclick="openMenu()">‚ò∞</span>
<span class="logo">TonCrime</span>
</div>

<div class="stats">
<div id="stats"></div>

<div class="bar">
<div id="xpBar" class="bar-fill xp-fill"></div>
</div>

<div class="bar">
<div id="energyBar" class="bar-fill energy-fill"></div>
</div>
</div>

</div>

<!-- ================= CONTENT ================= -->

<div class="main">
<div id="tc-content"></div>
</div>

<!-- ================= CONFIG ================= -->

<script>
window.CONFIG={
SUPABASE_URL:"https://hwhscuyudwphnsipibpy.supabase.co",
SUPABASE_KEY:"sb_publishable_dItLcV8z83CvDWuR8nTabA_ImTHGETu",
USER_ID:localStorage.getItem("tc_user")||"591676206",
XP_LIMIT:100,
MAX_ENERGY:100,
ENERGY_INTERVAL:300000
};

window.db=supabase.createClient(
CONFIG.SUPABASE_URL,
CONFIG.SUPABASE_KEY
);
</script>

<!-- ================= MENU ================= -->

<script>
function openMenu(){
sidebar.classList.add("open");
overlay.classList.add("show");
}

overlay.onclick=()=>{
sidebar.classList.remove("open");
overlay.classList.remove("show");
};
</script>

<!-- ================= CORE ================= -->

<script src="engine/state.engine.js"></script>
<script src="engine/event.engine.js"></script>

<script>
window.CORE={
modules:[],
register(name,check){
this.modules.push({name,check});
},
start(){
console.log("üöÄ TonCrime Started");
EVENT.emit("game:ready");
}
};
</script>

<!-- ================= ENGINES ================= -->

<script src="engine/engine.js"></script>
<script src="engine/ui.engine.js"></script>
<script src="engine/layout.engine.js"></script>
<script src="engine/missions.engine.js"></script>

<!-- ================= ROUTER ================= -->

<script>

window.PAGE={
go(page){
location.hash=page;
loadPage();
}
};

function loadPage(){

const page=location.hash.replace("#","")||"index";

EVENT.emit("page:enter",page);

if(page==="index"){
tc_content.innerHTML=`
<h2>üèô Yeraltƒ± ≈ûehri</h2>
<p>≈ûehir ya≈üƒ±yor...</p>
`;
}

if(page==="pvp"){
tc_content.innerHTML=`
<h2>‚öî PvP Arena</h2>
<button onclick="PVP_TARGET.search()">Rakip Ara</button>
`;
}

}

window.addEventListener("load",()=>{
CORE.start();
loadPage();
});

</script>

</body>
</html>
