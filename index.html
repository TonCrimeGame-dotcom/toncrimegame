<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TonCrime</title>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="config.js"></script>
<script src="engine.js"></script>
<script src="layout.engine.js"></script>

<style>

body{
margin:0;
background:#0e0e0e;
color:white;
font-family:Arial;
}

/* ===== TOPBAR ===== */

.topbar{
background:#111;
padding:15px 25px;
display:flex;
justify-content:space-between;
align-items:center;
border-bottom:1px solid #222;
}

.logo{
color:gold;
font-size:22px;
font-weight:bold;
}

.menuBtn{
cursor:pointer;
margin-right:15px;
font-size:20px;
}

/* ===== PAGE ===== */

.page{
display:flex;
gap:25px;
padding:25px;
}

.leftArea{width:65%;}
.rightArea{width:25%;}

/* ===== CARDS ===== */

.card{
background:#1b1b1b;
padding:20px;
border-radius:10px;
margin-bottom:20px;
}

/* ===== SIDEBAR ===== */

.sidebar{
position:fixed;
top:0;
left:-260px;
width:250px;
height:100%;
background:#151515;
padding:25px;
transition:.3s;
z-index:2000;
}

.sidebar.open{left:0;}

.overlay{
position:fixed;
width:100%;
height:100%;
background:rgba(0,0,0,.6);
display:none;
z-index:1500;
}

.overlay.show{display:block;}

input{
width:100%;
padding:10px;
background:#111;
border:none;
color:white;
margin-top:10px;
border-radius:6px;
}

button{
background:gold;
border:none;
padding:10px;
margin-top:10px;
cursor:pointer;
font-weight:bold;
border-radius:6px;
}

</style>
</head>

<body>

<script>

/* =====================================
   SAYFA ƒ∞√áERƒ∞ƒûƒ∞
===================================== */

buildLayout(`

<div class="card">
<h3>üèÜ Aktif Turnuva</h3>
<div id="tournamentBox">y√ºkleniyor...</div>
</div>

<div class="card">
<h3>üí¨ Clan Chat</h3>

<div id="chatBox"
style="
height:250px;
background:#111;
overflow:auto;
padding:10px;
border-radius:6px;
margin-bottom:10px;">
</div>

<input id="chatInput" placeholder="Mesaj yaz...">
<button onclick="sendClanMessage()">G√∂nder</button>

</div>

`);

/* =====================================
   USER PANEL RENDER
===================================== */

function renderUserPanel(){

if(!GAME.user) return;

const el=document.getElementById("userInfo");

if(!el) return;

el.innerHTML=`
ID: ${GAME.user.id}<br>
Takma Ad: ${GAME.user.nickname}<br>
Seviye: ${GAME.user.level}<br>
XP: ${GAME.user.xp}<br>
Enerji: ${GAME.user.energy}
`;
}

/* =====================================
   CLAN CHAT (LOCAL DEMO)
===================================== */

function sendClanMessage(){

const input=document.getElementById("chatInput");
const box=document.getElementById("chatBox");

if(!input.value.trim()) return;

const msg=document.createElement("div");
msg.innerText="Sen: "+input.value;

box.appendChild(msg);
box.scrollTop=box.scrollHeight;

input.value="";
}

/* =====================================
   ENGINE HOOK
===================================== */

document.addEventListener("DOMContentLoaded",()=>{

setTimeout(()=>{
renderUserPanel();
},800);

});

</script>

</body>
</html>
