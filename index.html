<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TonCrime</title>

<link rel="stylesheet" href="style.css">

</head>
<body>

<!-- LOGO -->
<img src="logo.png" class="logo">

<!-- HUD -->
<div class="hud">
  <div class="username" id="username">Player</div>

  <div class="row">
    ‚ö° <span id="energyText">0/100</span>
    <div class="bar">
      <div id="energyFill" class="fill energy"></div>
    </div>
  </div>

  <div class="row">
    ‚≠ê XP
    <div class="bar">
      <div id="xpFill" class="fill xp"></div>
    </div>
  </div>

  <div class="row yton">
    <img src="yton.png">
    <span id="ytonText">0</span>
  </div>

  <div class="row">
    üî´ <span id="weaponText">Yok</span>
  </div>
</div>

<!-- SLIDE MENU -->
<div class="menu-container">

  <div class="menu-slider" id="menuSlider">

    <div class="menu-card" onclick="go('missions.html')">
      <img src="missions.jpg">
      <span>G√∂revler</span>
    </div>

    <div class="menu-card" onclick="go('pvp.html')">
      <img src="pvp.jpg">
      <span>PvP Arena</span>
    </div>

    <div class="menu-card" onclick="go('nightclub.html')">
      <img src="nightclub.jpg">
      <span>Gece Kul√ºb√º</span>
    </div>

    <div class="menu-card" onclick="go('coffeeshop.html')">
      <img src="coffeeshop.jpg">
      <span>Coffee Shop</span>
    </div>

    <div class="menu-card" onclick="go('xxx.html')">
      <img src="xxx.jpg">
      <span>Genel Ev</span>
    </div>

    <div class="menu-card" onclick="go('weapons.html')">
      <img src="weapons.jpg">
      <span>Silah T√ºccarƒ±</span>
    </div>

  </div>

  <div class="menu-arrow left" onclick="slideMenu(-1)">‚Äπ</div>
  <div class="menu-arrow right" onclick="slideMenu(1)">‚Ä∫</div>

</div>

<!-- CHAT -->
<div class="chat">
  <div class="chat-messages" id="chatBox"></div>
  <input type="text" id="chatInput" placeholder="Mesaj...">
</div>

<script>

/* =============================
   GLOBAL PLAYER SYSTEM
   ============================= */

if(!localStorage.getItem("player")){
  localStorage.setItem("player", JSON.stringify({
    username:"TonPlayer",
    energy:60,
    maxEnergy:100,
    xp:20,
    level:1,
    yton:1500,
    weapon:{name:"Tabanca",bonus:10},
    lastEnergyTime:Date.now()
  }));
}

function getPlayer(){
  return JSON.parse(localStorage.getItem("player"));
}

function savePlayer(p){
  localStorage.setItem("player", JSON.stringify(p));
}

/* =============================
   ENERGY REGEN (5 DAKƒ∞KA)
   ============================= */

function energyRegen(){
  let p = getPlayer();
  let now = Date.now();
  let diff = now - p.lastEnergyTime;

  if(diff >= 300000){
    let gain = Math.floor(diff / 300000);
    p.energy = Math.min(p.maxEnergy, p.energy + gain);
    p.lastEnergyTime = now;
    savePlayer(p);
    updateUI();
  }
}

setInterval(energyRegen,10000);

/* =============================
   UI UPDATE
   ============================= */

function updateUI(){
  let p = getPlayer();

  document.getElementById("username").innerText = p.username;
  document.getElementById("energyText").innerText =
    p.energy + "/" + p.maxEnergy;

  document.getElementById("ytonText").innerText = p.yton;
  document.getElementById("weaponText").innerText =
    p.weapon.name + " (+"+p.weapon.bonus+"%)";

  document.getElementById("energyFill").style.width =
    (p.energy / p.maxEnergy * 100) + "%";

  document.getElementById("xpFill").style.width =
    (p.xp / (p.level*100) * 100) + "%";
}

updateUI();

/* =============================
   SLIDE MENU
   ============================= */

let menuIndex = 0;

function slideMenu(dir){
  const slider = document.getElementById("menuSlider");
  const total = slider.children.length;

  menuIndex += dir;

  if(menuIndex < 0) menuIndex = 0;
  if(menuIndex > total-1) menuIndex = total-1;

  slider.style.transform =
    "translateX(-" + (menuIndex * 240) + "px)";
}

function go(page){
  window.location.href = page;
}

/* =============================
   CHAT
   ============================= */

document.getElementById("chatInput")
.addEventListener("keypress", function(e){
  if(e.key==="Enter" && this.value!=""){
    let div = document.createElement("div");
    div.innerText = getPlayer().username + ": " + this.value;
    document.getElementById("chatBox").appendChild(div);
    this.value="";
  }
});

</script>

</body>
</html>
