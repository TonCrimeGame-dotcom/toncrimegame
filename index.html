<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>TonCrime</title>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
body{
margin:0;
background:#0e0e0e;
color:white;
font-family:Arial;
overflow-x:hidden;
}
</style>
</head>

<body>

<!-- CONTENT ROOT -->
<div id="app"></div>

<!-- ================= CONFIG ================= -->

<script>
window.CONFIG={
SUPABASE_URL:"https://hwhscuyudwphnsipibpy.supabase.co",
SUPABASE_KEY:"sb_publishable_dItLcV8z83CvDWuR8nTabA_ImTHGETu",
USER_ID:localStorage.getItem("tc_user") || "591676206",

XP_LIMIT:100,
MAX_ENERGY:100,
ENERGY_INTERVAL:300000
};

window.db = supabase.createClient(
CONFIG.SUPABASE_URL,
CONFIG.SUPABASE_KEY
);
</script>

<!-- ================= CORE ENGINES ================= -->

<script src="engine/state.engine.js"></script>
<script src="engine/event.engine.js"></script>

<script>
window.CORE={
modules:[],
register(name,check){
this.modules.push({name,check});
},
start(){
console.log("üöÄ Booting TonCrime...");
EVENT.emit("game:ready");
}
};
</script>

<!-- ================= GAME ENGINES ================= -->

<script src="engine/engine.js"></script>
<script src="engine/layout.engine.js"></script>
<script src="engine/ui.engine.js"></script>
<script src="engine/world.engine.js"></script>
<script src="engine/chat.engine.js"></script>

<script src="engine/pvp.target.engine.js"></script>
<script src="engine/pvp.matchmaker.engine.js"></script>
<script src="engine/question.engine.js"></script>
<script src="engine/answer.engine.js"></script>
<script src="engine/pvp.resolve.engine.js"></script>
<script src="engine/elo.engine.js"></script>

<script src="engine/daily.engine.js"></script>
<script src="engine/achievement.engine.js"></script>
<script src="engine/season.engine.js"></script>

<script src="engine/economy.engine.js"></script>
<script src="engine/cityevents.engine.js"></script>

<!-- ================= BOOTSTRAP ================= -->

<script>

/* PAGE SYSTEM */
window.PAGE={
go(page){
location.hash=page;
loadPage();
}
};

/* SIMPLE ROUTER */

function loadPage(){

const page=location.hash.replace("#","") || "index";

EVENT.emit("page:enter",page);

const root=document.getElementById("tc-content");

if(!root) return;

if(page==="index"){
root.innerHTML=`
<h2>üèô Yeraltƒ± ≈ûehri</h2>
<p>≈ûehir ya≈üƒ±yor...</p>

<button onclick="DAILY.claim()">üéÅ G√ºnl√ºk √ñd√ºl</button>

<div id="onlinePlayers"></div>

<div class="chatBox">
<div id="chatMessages"></div>
<div class="chatInput">
<input id="chatInput">
<button onclick="CHAT.send()">G√∂nder</button>
</div>
</div>
`;
}

if(page==="missions"){
root.innerHTML="<h2>üéØ G√∂revler y√ºkleniyor...</h2>";
}

if(page==="pvp"){
root.innerHTML=`
<h2>‚öî PvP Arena</h2>
<button onclick="PVP_TARGET.search()">Rakip Ara</button>
`;
}

}

/* START GAME */

window.addEventListener("load",()=>{

CORE.start();
loadPage();

});

</script>

</body>
</html>
