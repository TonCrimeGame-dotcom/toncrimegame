<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YeraltÄ± Åžehri</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
margin:0;
background:#000;
color:#fff;
font-family:Arial;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
text-align:center;
}

.box{
background:#111;
padding:25px;
border-radius:12px;
width:90%;
max-width:400px;
}

h2{color:#f90}

button{
margin-top:15px;
width:100%;
padding:12px;
background:#f90;
border:none;
border-radius:8px;
font-weight:bold;
cursor:pointer;
}
</style>
</head>
<body>

<div class="box" id="content">
<h2>YÃ¼kleniyor...</h2>
</div>

<script>

/* Age kontrol */
if(localStorage.getItem("ageVerified")!=="true"){
window.location.href="index.html";
}

const tg = window.Telegram?.WebApp;
let user = tg?.initDataUnsafe?.user;

/* EÄŸer Telegram user yoksa fallback gÃ¶ster */
if(!user){
document.getElementById("content").innerHTML = `
<h2>ðŸ”¥ YeraltÄ± Åžehri</h2>
<p>Telegram kullanÄ±cÄ± bilgisi alÄ±namadÄ±.</p>
<p>LÃ¼tfen bot iÃ§inden tekrar aÃ§.</p>
`;
}else{

let nickname = localStorage.getItem("nickname");

if(!nickname){
document.getElementById("content").innerHTML = `
<h2>Takma Ad Belirle</h2>
<input id="nickInput"
style="width:100%;padding:10px;margin-top:10px;background:#222;border:none;color:#fff;border-radius:6px;">
<button onclick="saveNick()">Kaydet</button>
`;
}else{
showGame();
}

window.saveNick = function(){
let nick=document.getElementById("nickInput").value.trim();
if(nick.length<3){
alert("En az 3 karakter");
return;
}
localStorage.setItem("nickname",nick);
showGame();
}

function showGame(){
let nick = localStorage.getItem("nickname");

document.getElementById("content").innerHTML = `
<h2>ðŸ”¥ YeraltÄ± Åžehri</h2>
<p>ID: ${user.id}</p>
<p>ðŸ‘¤ ${nick}</p>
<button onclick="connectWallet()">TON CÃ¼zdan BaÄŸla</button>
`;
}

window.connectWallet = function(){
alert("TON Connect sonraki adÄ±mda entegre edilecek.");
}

}

</script>

</body>
</html>
