<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TonCrime - PvP</title>

<link rel="stylesheet" href="css/global.css">

<style>

/* MENU ASLA YOK */
.sidebar,.overlay,.menu-wrapper,.menu-slider{display:none!important}

/* GERİ %50 KÜÇÜK */
.back-btn{
position:absolute;
top:10px;
left:10px;
z-index:100;
padding:4px 8px;          /* küçültüldü */
font-size:11px;           /* küçültüldü */
border-radius:10px;
border:1px solid gold;
background:rgba(0,0,0,0.4);
color:gold;
cursor:pointer;
backdrop-filter:blur(6px);
}

/* PVP CARD */
.pvp-card{
position:absolute;
left:50%;
top:50%;
transform:translate(-50%,-50%);
width:330px;
background:rgba(0,0,0,0.45);
border-radius:20px;
padding:14px;
color:white;
z-index:20;
backdrop-filter:blur(10px);
}

.pvp-title{
text-align:center;
color:gold;
font-weight:800;
margin-bottom:10px;
}

.pvp-row{
display:flex;
justify-content:space-between;
font-size:12px;
margin-bottom:10px;
}

.pvp-players{
display:flex;
gap:10px;
margin-bottom:12px;
}

.pvp-side{
flex:1;
background:rgba(255,255,255,0.07);
border-radius:14px;
padding:8px;
}

.pvp-name{font-weight:800;color:gold;font-size:13px}
.pvp-mini{font-size:11px;opacity:.8;margin-top:6px}
.pvp-hptext{font-size:11px;margin-top:6px}

.pvp-bar{
height:7px;
background:rgba(255,255,255,0.15);
border-radius:999px;
overflow:hidden;
margin-top:5px;
}
.pvp-fill{height:100%;width:0%;background:#00ff99}

.pvp-vs{
width:30px;
text-align:center;
font-weight:900;
color:gold;
padding-top:20px;
}

.pvp-actions{
display:flex;
gap:8px;
margin-top:8px;
}
.pvp-btn{
flex:1;
border:none;
border-radius:12px;
padding:9px;
font-weight:800;
cursor:pointer;
background:gold;
}
.pvp-btn:disabled{opacity:.4}
.pvp-btn.ghost{
background:rgba(255,255,255,0.1);
color:white;
border:1px solid gold;
}

.pvp-log{
margin-top:8px;
max-height:70px;
overflow:auto;
font-size:11px;
}

/* LEADERBOARD TAM GÖRÜNÜR */
.pvp-leaderboard{
position:absolute;
left:50%;
bottom:10px;
transform:translateX(-50%);
width:350px;
background:rgba(0,0,0,0.35);
border-radius:16px;
padding:10px;
z-index:10;
backdrop-filter:blur(8px);
}

.lb-head{
display:flex;
justify-content:space-between;
color:gold;
font-size:12px;
margin-bottom:6px;
}

.lb-list{
max-height:110px;
overflow:auto;
}

.lb-item{
display:flex;
justify-content:space-between;
background:rgba(255,255,255,0.08);
padding:6px 10px;
border-radius:10px;
margin-bottom:6px;
font-size:12px;
}

</style>
</head>

<body>

<div class="app">
<img class="bg" src="assets/background.jpg">

<div class="back-btn" onclick="location.href='index.html'">← Geri</div>

<div class="pvp-card">
<div class="pvp-title">PvP Arena</div>

<div class="pvp-row">
<div>Durum</div>
<div id="status">Hazır</div>
</div>

<div class="pvp-players">
<div class="pvp-side">
<div class="pvp-name" id="meName">Player</div>
<div class="pvp-hptext" id="meHpText">HP:100/100</div>
<div class="pvp-bar"><div class="pvp-fill" id="meHpBar"></div></div>
<div class="pvp-mini" id="meStats"></div>
</div>

<div class="pvp-vs">VS</div>

<div class="pvp-side">
<div class="pvp-name" id="opName">Rakip</div>
<div class="pvp-hptext" id="opHpText">HP:-</div>
<div class="pvp-bar"><div class="pvp-fill" id="opHpBar"></div></div>
<div class="pvp-mini" id="opStats"></div>
</div>
</div>

<div class="pvp-actions">
<button class="pvp-btn" id="findBtn">Rakip Ara</button>
<button class="pvp-btn" id="startBtn" disabled>Savaş Başlat</button>
<button class="pvp-btn ghost" id="resetBtn">Sıfırla</button>
</div>

<div class="pvp-log" id="log"></div>
</div>

<div class="pvp-leaderboard">
<div class="lb-head">
<div>Leaderboard</div>
<div id="lbMe">ELO:1000</div>
</div>
<div class="lb-list" id="lbList"></div>
</div>

</div>

<!-- MOTORLAR (HUD + LOGO BURADAN GELİR) -->
<script src="js/player.engine.js"></script>
<script src="js/chat.engine.js"></script>

<script>

/* HUD + LOGO GÖRÜNME SORUNU ÇÖZÜMÜ */
window.addEventListener("load",()=>{
if(window.player && window.player.initHud){
window.player.initHud();
}
});

/* PVP BASİT MOTOR */
const player = window.player;

const $ = id=>document.getElementById(id);

let meHp=100,opHp=100,opAtk=0;

function log(t){
const d=document.createElement("div");
d.textContent=t;
$("log").appendChild(d);
$("log").scrollTop=9999;
}

function bar(id,val){
$(id).style.width=val+"%";
}

function find(){
$("status").textContent="Aranıyor...";
setTimeout(()=>{
opAtk=8+Math.floor(Math.random()*6);
opHp=100;
$("opName").textContent="Rakip#"+Math.floor(Math.random()*900);
$("opStats").textContent="ATK:"+opAtk;
$("opHpText").textContent="HP:100/100";
bar("opHpBar",100);
$("status").textContent="Hazır";
$("startBtn").disabled=false;
},800);
}

function fight(){
$("status").textContent="Savaş";
const t=setInterval(()=>{
opHp-=12;
meHp-=opAtk;
bar("opHpBar",opHp);
bar("meHpBar",meHp);
$("opHpText").textContent="HP:"+opHp+"/100";
$("meHpText").textContent="HP:"+meHp+"/100";
if(opHp<=0||meHp<=0){
clearInterval(t);
$("status").textContent=opHp<=0?"Kazandın":"Kaybettin";
}
},700);
}

function reset(){
meHp=100;opHp=100;
bar("meHpBar",100);
bar("opHpBar",0);
$("opHpText").textContent="HP:-";
$("status").textContent="Hazır";
$("startBtn").disabled=true;
$("log").innerHTML="";
}

$("findBtn").onclick=find;
$("startBtn").onclick=fight;
$("resetBtn").onclick=reset;

/* Leaderboard demo */
const demo=["Shadow","Viper","Razor","Ghost"];
demo.forEach((n,i)=>{
const d=document.createElement("div");
d.className="lb-item";
d.innerHTML="<span>#"+(i+1)+" "+n+"</span><span>"+(1100-i*30)+"</span>";
$("lbList").appendChild(d);
});

</script>

</body>
</html>
