<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nightclub 3D Book</title>

<style>
body{
  margin:0;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
  font-family:Arial;
}

.app{
  width:390px;
  height:690px;
  position:relative;
  overflow:hidden;
}

/* BACKGROUND */
.bg{
  position:absolute;
  width:100%;
  height:100%;
  object-fit:cover;
}

/* 3D SCENE */
.scene{
  position:absolute;
  top:63%;
  left:50%;
  transform:translate(-50%,-50%);
  width:330px;
  height:420px;
  perspective:1200px;
}

/* BOOK */
.book{
  width:100%;
  height:100%;
  position:relative;
  transform-style:preserve-3d;
  transform:rotateX(12deg);
  transition:0.8s;
}

/* PAGE BASE */
.page{
  position:absolute;
  width:50%;
  height:100%;
  top:0;
  background:#141414;
  border:1px solid rgba(255,215,0,0.4);
  box-shadow:0 20px 40px rgba(0,0,0,0.6);
  padding:20px;
  box-sizing:border-box;
  backface-visibility:hidden;
}

/* LEFT */
.left{
  left:0;
}

/* RIGHT */
.right{
  right:0;
  transform-origin:left;
  transition:1s;
}

/* FLIP */
.book.flipped .right{
  transform:rotateY(-180deg);
}

/* ITEMS */
.item{
  display:flex;
  justify-content:space-between;
  margin:12px 0;
  color:gold;
  cursor:pointer;
  font-size:13px;
  transition:0.2s;
}

.item:hover{
  transform:scale(1.05);
}

/* NAV */
.nav{
  position:absolute;
  bottom:-60px;
  width:100%;
  display:flex;
  justify-content:space-between;
}

.nav button{
  background:gold;
  border:none;
  padding:5px 12px;
  font-weight:bold;
  cursor:pointer;
  border-radius:6px;
}

/* STATUS */
.status{
  position:absolute;
  top:10px;
  left:10px;
  color:white;
  font-size:12px;
}
</style>
</head>
<body>

<div class="app">

<img src="nightclub_indoor.jpg" class="bg">

<div class="scene">
  <div class="book" id="book">

    <div class="page left" id="leftPage"></div>
    <div class="page right" id="rightPage"></div>

  </div>

  <div class="nav">
    <button onclick="prev()">â—€</button>
    <button onclick="next()">â–¶</button>
  </div>
</div>

<div class="status" id="status"></div>

</div>

<script>

/* PLAYER */

let player={
  energy:0,
  risk:0,
  workers:0,
  lastType:null
};

/* PRODUCTS (16 total) */

const products=[
  {name:"RakÄ±",energy:15,type:"drink"},
  {name:"Vodka",energy:20,type:"drink"},
  {name:"Whiskey",energy:25,type:"drink"},
  {name:"Beer",energy:10,type:"drink"},
  {name:"Champagne",energy:30,type:"drink"},
  {name:"Tequila",energy:22,type:"drink"},
  {name:"Gin",energy:18,type:"drink"},
  {name:"Rum",energy:20,type:"drink"},

  {name:"Cognac",energy:28,type:"drink"},
  {name:"Wine",energy:15,type:"drink"},
  {name:"Absinthe",energy:35,type:"drink"},
  {name:"Energy Shot",energy:40,type:"drink"},

  {name:"Patates",energy:8,type:"food"},
  {name:"Ã‡erez",energy:6,type:"food"},
  {name:"Meyve TabaÄŸÄ±",energy:12,type:"food"},
  {name:"Special Mix",energy:15,type:"food"}
];

let pageIndex=0;
const perPage=8;

const leftPage=document.getElementById("leftPage");
const rightPage=document.getElementById("rightPage");
const book=document.getElementById("book");
const status=document.getElementById("status");

/* RENDER */

function render(){

  leftPage.innerHTML="";
  rightPage.innerHTML="";

  let start=pageIndex*perPage;
  let slice=products.slice(start,start+perPage);

  slice.forEach((item,i)=>{
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`<span>${item.name}</span><span>${item.energy}âš¡</span>`;
    div.onclick=()=>buy(item);

    if(i<4){
      leftPage.appendChild(div);
    }else{
      rightPage.appendChild(div);
    }
  });
}

render();

/* NAVIGATION */

function next(){
  if(pageIndex < Math.floor(products.length/perPage)-1){
    book.classList.add("flipped");
    setTimeout(()=>{
      pageIndex++;
      render();
      book.classList.remove("flipped");
    },600);
  }
}

function prev(){
  if(pageIndex>0){
    book.classList.add("flipped");
    setTimeout(()=>{
      pageIndex--;
      render();
      book.classList.remove("flipped");
    },600);
  }
}

/* BUY LOGIC */

function buy(item){

  player.energy+=item.energy;

  if(item.type==="drink"){
    player.risk+=45;
  }

  if(item.type==="food" && player.lastType==="drink"){
    if(Math.random()<0.30){
      player.workers++;
    }
  }

  player.lastType=item.type;

  update();
}

function update(){
  status.innerHTML=`
  âš¡ Energy: ${player.energy}<br>
  âš  Risk: ${player.risk}<br>
  ðŸ‘© Worker: ${player.workers}
  `;
}

</script>

</body>
</html>
